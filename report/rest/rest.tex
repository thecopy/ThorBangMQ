\documentclass[a4paper, 11pt]{article}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage[pdftex]{hyperref}
\usepackage{placeins}

% Lengths and indenting
\setlength{\textwidth}{16.5cm}
\setlength{\marginparwidth}{1.5cm}
\setlength{\parindent}{0cm}
\setlength{\parskip}{0.15cm}
\setlength{\textheight}{22cm}
\setlength{\oddsidemargin}{0cm}
\setlength{\evensidemargin}{\oddsidemargin}
\setlength{\topmargin}{0cm}
\setlength{\headheight}{0cm}
\setlength{\headsep}{0cm}

\renewcommand{\familydefault}{\sfdefault}

\newcommand{\TODO}[1]{\textbf{TODO:} #1}

\title{Advanced Systems Lab - Complementary Report}
\author{jerik\\mbang\\}
\date{\today}

\begin{document}
\maketitle

\section{1 vs. 10 middleware}
In the original project report the experiment concerning the difference in performance when using 10 middlewares vs. 1 middleware was errornous. In this report the experiment has been re-done correctly.

\subsection{Cause}
The cause why the experiment was a failure was due to the middlewares each using 50 database connections (effictively 500 connections). 
This would cause problems due to the database (Postgres) connection limit. 
This led to only 2 middlewares being functional and 8 infunctional. This in turn led to that the system only had 20\% of the workload, that is the system only had 300 (of 1500) clients putting on workload.. This is what caused the responsetime to be so low and the throughput still high.\\

\subsection{Changes}
In this experiment we've made sure to stay within the limits of Postgres and also to log on the client-side and not on the middleware side. Also the number of middleware has been decreased to 8 (total of 80 connections to the database) since strange problems occured when using 10 (total of 100 connections to the database).

\subsection{Results}
In the experiment 10 database connections per middleware were used to make sure the same problem as earlier didn't occur. We used 50 worker-threads per middleware as the original experiment also had. We used 700 clients in both experiments and they were running for 6 minutes each and were run 3 times each. The think time was 100ms.

\begin{table}[!htbp]
\centering
    \begin{tabular}{|l|l|l|l|}
    \hline
    Configuration 	& Mean Response Time 			& 	Mean Throughput\\ \hline
    1 Middleware  	& $200.48 \pm 13.61$ ms       	&   $2326.1 \pm 108.9$ req/s  \\ \hline
    8 Middleware 	& $200.14 \pm 9.85$  ms       	&   $2326.7 \pm 67.9$ req/s  \\ \hline
    \end{tabular}
    \label{table}
    \caption{The results from the re-done experiment.}
\end{table}
\FloatBarrier % stupid table, dont move away from the results-subsection
\subsection{Analysis}
Keeping in mind the conclusion from the main report in which the database was the bottleneck, the results makes sense. Since the database is a shared device, it should not matter if you distribute the other devices since there were not the bottleneck is the first place.\\

\textit{The logs for this can be found in the folder Rest in the SVN}
\end{document} 
